{% extends 'def_i/base-education.html' %}
{% load static %}
{% block extra_style %}
    <link rel="stylesheet" href="{% static 'def_i/css/article_feed.css' %}">
{% endblock %}

{% block contents %}
{% if messages %}
	{% for message in messages %}
    <!-- CSSで投稿後の画面を作るため -->
		<span{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</span>
	{% endfor %}
{% endif %}

<!-- ノート検索窓 -->
<form action="" method="GET">
    {{form}}
    <button type="submit">検索する</button>
</form>

<a href="{% url 'article_post' %}">ノートを書く</a>

<!-- 並び替え方法を選択 -->
<ul>
    <li>
        <a href="?orderby=new&keyword={{request.GET.keyword}}" class="main-container__menubar-sublink">新着</a>
    </li>
    <li>
        <a href="?orderby=like&keyword={{request.GET.keyword}}" class="main-container__menubar-sublink">人気</a>
    </li>
    <li>
        <a href="?orderby=mynote&keyword={{request.GET.keyword}}" class="main-container__menubar-sublink">あなたのノート</a>
    </li>
</ul>

<h2>ノート一覧</h2>
{% for article in articles %}
<article class="main-container__contents-article">
    <a href="{% url 'article_detail' article.pk %}">
        <h1>{{article.title}}</h1>
    </a>
    <span>{{article.category}}</span>
    <span>レッスン{{article.course.course_num}}-{{article.lesson.lesson_num}}</span>

    <p>
        <a href="{% url 'user_page' article.poster.pk %}">
            {% if article.poster.user_image %}
                <img src="{{article.poster.user_image.url}}" width="30" alt="">
            {% else %}
                <img src="{% static 'def_i/img/default.png' %}" width="30" alt="">
            {% endif %}
            {{article.poster}}
        </a>
        <span>{{article.created_at|date:"Y/M/j H:i"}}に投稿</span>
    </p>
    <!-- <p>{{article.like_count}}いいね</p> -->
</article>
{% empty %}
    <p>記事がありません．</p>
{% endfor %}

{% include 'def_i/pagination.html' %}
{% endblock contents %}
