{% extends 'def_i/base-education.html' %}
{% load static %}
{% block extra_style %}
    <link rel="stylesheet" href="{% static 'def_i/css/article_feed.css' %}">
{% endblock %}

{% block contents %}
{% if messages %}
	{% for message in messages %}
    <!-- CSSで投稿後の画面を作るため -->
		<span{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</span>
	{% endfor %}
{% endif %}

<!-- ノート検索窓 -->
<form action="" method="GET">
    {{form}}
    <button type="submit">検索する</button>
</form>

<a href="{% url 'article_post' %}">ノートを書く</a>

<!-- 並び替え方法を選択 -->
<ul>
    <li>
        <a href="?orderby=new&keyword={{request.GET.keyword}}" class="main-container__menubar-sublink">新着</a>
    </li>
    <li>
        <a href="?orderby=like&keyword={{request.GET.keyword}}" class="main-container__menubar-sublink">人気</a>
    </li>
    <li>
        <a href="?orderby=mynote&keyword={{request.GET.keyword}}" class="main-container__menubar-sublink">あなたのノート</a>
    </li>
</ul>

<h2>ノート一覧</h2>
<div class="main-container__contents-article-container">

    <div class="main-container__contents-article-box">

        {% for article in articles %}
        <article class="main-container__contents-article">
            <a href="{% url 'article_detail' article.pk %}">
                <h2>{{article.title}}</h2>
            </a>

            <div class="main-container__contents-article-data">
                {{article.category}}  レッスン{{article.course.course_num}}-{{article.lesson.lesson_num}}
                <!-- <div>レッスン{{article.course.course_num}}-{{article.lesson.lesson_num}}</div> -->
                <a href="{% url 'user_page' article.poster.pk %}" class="user-disp">
                    {% if article.poster.user_image %}
                    <img src="{{article.poster.user_image.url}}" width="30" alt="">
                    {% else %}
                    <img src="{% static 'def_i/img/default.png' %}" width="30" alt="">
                    {% endif %}
                    <p>{{article.poster}}</p>
                </a>
                <p class="post-date">{{article.created_at|date:"Y/M/j H:i"}}に投稿</p>
            </div>
            <!-- <p>{{article.like_count}}いいね</p> -->
        </article>
        {% empty %}
        <p>記事がありません．</p>
        {% endfor %}
    </div>
</div>

<div class="pagination">
    {% include 'def_i/pagination.html' %}
</div>
{% endblock contents %}
